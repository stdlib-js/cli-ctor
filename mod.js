/// <reference types="./mod.d.ts" />
import e from"process";function t(e){return"number"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e))}var o={pkg:{},help:"",title:!0,version:"",updates:!0,argv:null,options:{}};var n=function(e){return Math.floor(e)===e},r=Object.prototype.hasOwnProperty,i=Array.isArray;var a=function(e,t){return"object"!=typeof t||null===t||i(t)?new TypeError("invalid argument. Options must be an object. Value: `"+t+"`."):r.call(t,"pkg")&&(e.pkg=t.pkg,"object"!=typeof e.pkg||null===e.pkg||i(e.pkg))?new TypeError("invalid option. `pkg` option must be an object. Option: `"+e.pkg+"`."):r.call(t,"help")&&(e.help=t.help,"string"!=typeof e.help)?new TypeError("invalid option. `help` option must be a string primitive. Option: `"+e.help+"`."):r.call(t,"version")&&(e.version=t.version,"string"!=typeof e.version)?new TypeError("invalid option. `version` option must be a string primitive. Option: `"+e.version+"`."):r.call(t,"title")&&(e.title=t.title,"string"!=typeof e.title&&"boolean"!=typeof e.title)?new TypeError("invalid option. `title` option must be either a string or boolean primitive. Option: `"+e.title+"`."):r.call(t,"updates")&&(e.updates=t.updates,"boolean"!=typeof e.updates)?new TypeError("invalid option. `updates` option must be a boolean primitive. Option: `"+e.updates+"`."):r.call(t,"argv")&&(e.argv=t.argv,!i(e.argv))?new TypeError("invalid option. `argv` option must be an array. Option: `"+e.argv+"`."):r.call(t,"options")&&(e.options=t.options,"object"!=typeof e.options||null===e.options||i(e.options))?new TypeError("invalid option. `options` option must be a plain object. Option: `"+e.options+"`."):null},l=e,s=console,p=l.versions.node;var u=function(e,t){var o;(o=p.split("."))[0]=parseInt(o[0],10),o[1]=parseInt(o[1],10),o[0]>0||o[1]>10?e.exitCode=t:(e.exitCode=t,setTimeout((function(){e.exit(t)}),10))},c="function"==typeof Object.defineProperty?Object.defineProperty:null;var f=function(){try{return c({},"x",{}),!0}catch(e){return!1}},v=Object.defineProperty,g=Object.prototype,b=g.toString,y=g.__defineGetter__,h=g.__defineSetter__,d=g.__lookupGetter__,m=g.__lookupSetter__;var _=v,k=function(e,t,o){var n,r,i,a;if("object"!=typeof e||null===e||"[object Array]"===b.call(e))throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if("object"!=typeof o||null===o||"[object Array]"===b.call(o))throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+o+"`.");if((r="value"in o)&&(d.call(e,t)||m.call(e,t)?(n=e.__proto__,e.__proto__=g,delete e[t],e[t]=o.value,e.__proto__=n):e[t]=o.value),i="get"in o,a="set"in o,r&&(i||a))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return i&&y&&y.call(e,t,o.get),a&&h&&h.call(e,t,o.set),e},w=f()?_:k;var E=function(){};function j(){return this instanceof j?this:new j}(function(e,t,o){w(e,t,{configurable:!1,enumerable:!1,writable:!1,value:o})})(j.prototype,"notify",E);var O=function(e,o){o||(o={});var n={bools:{},strings:{},unknownFn:null};"function"==typeof o.unknown&&(n.unknownFn=o.unknown),"boolean"==typeof o.boolean&&o.boolean?n.allBools=!0:[].concat(o.boolean).filter(Boolean).forEach((function(e){n.bools[e]=!0}));var r={};Object.keys(o.alias||{}).forEach((function(e){r[e]=[].concat(o.alias[e]),r[e].forEach((function(t){r[t]=[e].concat(r[e].filter((function(e){return t!==e})))}))})),[].concat(o.string).filter(Boolean).forEach((function(e){n.strings[e]=!0,r[e]&&(n.strings[r[e]]=!0)}));var i=o.default||{},a={_:[]};Object.keys(n.bools).forEach((function(e){s(e,void 0!==i[e]&&i[e])}));var l=[];function s(e,o,i){if(!i||!n.unknownFn||function(e,t){return n.allBools&&/^--[^=]+$/.test(t)||n.strings[e]||n.bools[e]||r[e]}(e,i)||!1!==n.unknownFn(i)){var l=!n.strings[e]&&t(o)?Number(o):o;p(a,e.split("."),l),(r[e]||[]).forEach((function(e){p(a,e.split("."),l)}))}}function p(e,t,o){for(var r=e,i=0;i<t.length-1;i++){if("__proto__"===(a=t[i]))return;void 0===r[a]&&(r[a]={}),r[a]!==Object.prototype&&r[a]!==Number.prototype&&r[a]!==String.prototype||(r[a]={}),r[a]===Array.prototype&&(r[a]=[]),r=r[a]}var a;"__proto__"!==(a=t[t.length-1])&&(r!==Object.prototype&&r!==Number.prototype&&r!==String.prototype||(r={}),r===Array.prototype&&(r=[]),void 0===r[a]||n.bools[a]||"boolean"==typeof r[a]?r[a]=o:Array.isArray(r[a])?r[a].push(o):r[a]=[r[a],o])}function u(e){return r[e].some((function(e){return n.bools[e]}))}-1!==e.indexOf("--")&&(l=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var c=0;c<e.length;c++){var f=e[c];if(/^--.+=/.test(f)){var v=f.match(/^--([^=]+)=([\s\S]*)$/),g=v[1],b=v[2];n.bools[g]&&(b="false"!==b),s(g,b,f)}else if(/^--no-.+/.test(f)){s(g=f.match(/^--no-(.+)/)[1],!1,f)}else if(/^--.+/.test(f)){g=f.match(/^--(.+)/)[1];void 0===(m=e[c+1])||/^-/.test(m)||n.bools[g]||n.allBools||r[g]&&u(g)?/^(true|false)$/.test(m)?(s(g,"true"===m,f),c++):s(g,!n.strings[g]||"",f):(s(g,m,f),c++)}else if(/^-[^-]+/.test(f)){for(var y=f.slice(1,-1).split(""),h=!1,d=0;d<y.length;d++){var m;if("-"!==(m=f.slice(d+2))){if(/[A-Za-z]/.test(y[d])&&/=/.test(m)){s(y[d],m.split("=")[1],f),h=!0;break}if(/[A-Za-z]/.test(y[d])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(m)){s(y[d],m,f),h=!0;break}if(y[d+1]&&y[d+1].match(/\W/)){s(y[d],f.slice(d+2),f),h=!0;break}s(y[d],!n.strings[y[d]]||"",f)}else s(y[d],m,f)}g=f.slice(-1)[0];h||"-"===g||(!e[c+1]||/^(-|--)[^-]/.test(e[c+1])||n.bools[g]||r[g]&&u(g)?e[c+1]&&/^(true|false)$/.test(e[c+1])?(s(g,"true"===e[c+1],f),c++):s(g,!n.strings[g]||"",f):(s(g,e[c+1],f),c++))}else if(n.unknownFn&&!1===n.unknownFn(f)||a._.push(n.strings._||!t(f)?f:Number(f)),o.stopEarly){a._.push.apply(a._,e.slice(c+1));break}}return Object.keys(i).forEach((function(e){var t,o,n;t=a,o=e.split("."),n=t,o.slice(0,-1).forEach((function(e){n=n[e]||{}})),o[o.length-1]in n||(p(a,e.split("."),i[e]),(r[e]||[]).forEach((function(t){p(a,t.split("."),i[e])})))})),o["--"]?(a["--"]=new Array,l.forEach((function(e){a["--"].push(e)}))):l.forEach((function(e){a._.push(e)})),a},T=o,x=n,A=a,F=l,S=s,V=u,$=j,P=Object.defineProperty,B=Object.keys;function N(e,t,o){P(e,t,{configurable:!1,enumerable:!1,writable:!1,value:o})}function C(e){var t,o,n,r,i,a,l;if(!(this instanceof C))return arguments.length?new C(e):new C;if(n={pkg:{},help:T.help,title:T.title,version:T.version,updates:T.updates,argv:T.argv,options:{}},arguments.length&&(l=A(n,e)))throw l;return a=this,F.stdout.on("error",F.exit),F.stderr.on("error",F.exit),N(this,"args",s),N(this,"flags",p),N(this,"help",u),N(this,"version",c),!0===n.title&&n.pkg?"object"==typeof n.pkg.bin&&null!==n.pkg.bin?(o=B(n.pkg.bin),F.title=o[0]):n.pkg.name&&(F.title=n.pkg.name):n.title&&(F.title=n.title),n.updates&&n.pkg&&n.pkg.name&&n.pkg.version&&(n.pkg,$().notify()),!n.version&&n.pkg&&n.pkg.version&&(n.version=n.pkg.version),n.argv?n.argv=n.argv.slice(2):n.argv=F.argv.slice(2),r=O(n.argv,n.options),i=r._,delete r._,(t=r).help?this.help(0):t.version?this.version():this;function s(){return i.slice()}function p(){var e,o,n,r;for(e=B(t),o={},r=0;r<e.length;r++)o[n=e[r]]=t[n];return o}function u(e){S.error(n.help),a.close(e||0)}function c(){S.error(n.version),a.close()}}N(C.prototype,"close",(function(e){if(0!==arguments.length){if("number"!=typeof e||!x(e)||e<0)throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+e+"`.");V(F,e)}else V(F,0)})),N(C.prototype,"error",(function(e,t){var o;if(!(e instanceof Error))throw new TypeError("invalid argument. First argument must be an error object. Value: `"+e+"`.");if(arguments.length>1){if("number"!=typeof t||!x(t)||t<0)throw new TypeError("invalid argument. Second argument must be a nonnegative integer. Value: `"+t+"`.");o=t}else o=1;S.error("Error: %s",e.message),V(F,o)})),N(C.prototype,"exit",(function(e){if(0===arguments.length)return F.exit(0);if("number"!=typeof e||!x(e)||e<0)throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+e+"`.");F.exit(e)}));var M=C;export{M as default};
//# sourceMappingURL=mod.js.map
