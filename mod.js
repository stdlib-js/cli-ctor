// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./mod.d.ts" />
function e(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}function t(e){return"number"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e))}var n={pkg:{},help:"",title:!0,version:"",updates:!0,argv:null,options:{}};var r=function(e){return Math.floor(e)===e},o=Object.prototype.hasOwnProperty,i=Array.isArray;var a=function(e,t){return"object"!=typeof t||null===t||i(t)?new TypeError("invalid argument. Options must be an object. Value: `"+t+"`."):o.call(t,"pkg")&&(e.pkg=t.pkg,"object"!=typeof e.pkg||null===e.pkg||i(e.pkg))?new TypeError("invalid option. `pkg` option must be an object. Option: `"+e.pkg+"`."):o.call(t,"help")&&(e.help=t.help,"string"!=typeof e.help)?new TypeError("invalid option. `help` option must be a string primitive. Option: `"+e.help+"`."):o.call(t,"version")&&(e.version=t.version,"string"!=typeof e.version)?new TypeError("invalid option. `version` option must be a string primitive. Option: `"+e.version+"`."):o.call(t,"title")&&(e.title=t.title,"string"!=typeof e.title&&"boolean"!=typeof e.title)?new TypeError("invalid option. `title` option must be either a string or boolean primitive. Option: `"+e.title+"`."):o.call(t,"updates")&&(e.updates=t.updates,"boolean"!=typeof e.updates)?new TypeError("invalid option. `updates` option must be a boolean primitive. Option: `"+e.updates+"`."):o.call(t,"argv")&&(e.argv=t.argv,!i(e.argv))?new TypeError("invalid option. `argv` option must be an array. Option: `"+e.argv+"`."):o.call(t,"options")&&(e.options=t.options,"object"!=typeof e.options||null===e.options||i(e.options))?new TypeError("invalid option. `options` option must be a plain object. Option: `"+e.options+"`."):null},l="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function s(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}var p=s,c=u;function f(e){if(p===setTimeout)return setTimeout(e,0);if((p===s||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}"function"==typeof l.setTimeout&&(p=setTimeout),"function"==typeof l.clearTimeout&&(c=clearTimeout);var v,g=[],h=!1,b=-1;function y(){h&&v&&(h=!1,v.length?g=v.concat(g):b=-1,g.length&&d())}function d(){if(!h){var e=f(y);h=!0;for(var t=g.length;t;){for(v=g,g=[];++b<t;)v&&v[b].run();b=-1,t=g.length}v=null,h=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===u||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function m(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new w(e,t)),1!==g.length||h||f(d)}function w(e,t){this.fun=e,this.array=t}w.prototype.run=function(){this.fun.apply(null,this.array)};var _={},k=[],E={},T={},j={};function O(){}var x=O,A=O,P=O,F=O,N=O,M=O,S=O;function V(e){throw new Error("process.binding is not supported")}function $(){return"/"}function L(e){throw new Error("process.chdir is not supported")}function B(){return 0}var z=l.performance||{},D=z.now||z.mozNow||z.msNow||z.oNow||z.webkitNow||function(){return(new Date).getTime()};function C(e){var t=.001*D.call(z),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]}var G=new Date;function I(){return(new Date-G)/1e3}var Z={nextTick:m,title:"browser",browser:true,env:_,argv:k,version:"",versions:E,on:x,addListener:A,once:P,off:F,removeListener:N,removeAllListeners:M,emit:S,binding:V,cwd:$,chdir:L,umask:B,hrtime:C,platform:"browser",release:T,config:j,uptime:I},W=e(Object.freeze({__proto__:null,addListener:A,argv:k,binding:V,browser:true,chdir:L,config:j,cwd:$,default:Z,emit:S,env:_,hrtime:C,nextTick:m,off:F,on:x,once:P,platform:"browser",release:T,removeAllListeners:M,removeListener:N,title:"browser",umask:B,uptime:I,version:"",versions:E})),q=console,H=W.versions.node;var J=function(e,t){var n;(n=H.split("."))[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10),n[0]>0||n[1]>10?e.exitCode=t:(e.exitCode=t,setTimeout((function(){e.exit(t)}),10))},K="function"==typeof Object.defineProperty?Object.defineProperty:null;var Q=function(){try{return K({},"x",{}),!0}catch(e){return!1}},R=Object.defineProperty,U=Object.prototype,X=U.toString,Y=U.__defineGetter__,ee=U.__defineSetter__,te=U.__lookupGetter__,ne=U.__lookupSetter__;var re=R,oe=function(e,t,n){var r,o,i,a;if("object"!=typeof e||null===e||"[object Array]"===X.call(e))throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if("object"!=typeof n||null===n||"[object Array]"===X.call(n))throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+n+"`.");if((o="value"in n)&&(te.call(e,t)||ne.call(e,t)?(r=e.__proto__,e.__proto__=U,delete e[t],e[t]=n.value,e.__proto__=r):e[t]=n.value),i="get"in n,a="set"in n,o&&(i||a))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return i&&Y&&Y.call(e,t,n.get),a&&ee&&ee.call(e,t,n.set),e},ie=Q()?re:oe;var ae=function(){};function le(){return this instanceof le?this:new le}(function(e,t,n){ie(e,t,{configurable:!1,enumerable:!1,writable:!1,value:n})})(le.prototype,"notify",ae);var se=function(e,n){n||(n={});var r={bools:{},strings:{},unknownFn:null};"function"==typeof n.unknown&&(r.unknownFn=n.unknown),"boolean"==typeof n.boolean&&n.boolean?r.allBools=!0:[].concat(n.boolean).filter(Boolean).forEach((function(e){r.bools[e]=!0}));var o={};Object.keys(n.alias||{}).forEach((function(e){o[e]=[].concat(n.alias[e]),o[e].forEach((function(t){o[t]=[e].concat(o[e].filter((function(e){return t!==e})))}))})),[].concat(n.string).filter(Boolean).forEach((function(e){r.strings[e]=!0,o[e]&&(r.strings[o[e]]=!0)}));var i=n.default||{},a={_:[]};Object.keys(r.bools).forEach((function(e){s(e,void 0!==i[e]&&i[e])}));var l=[];function s(e,n,i){if(!i||!r.unknownFn||function(e,t){return r.allBools&&/^--[^=]+$/.test(t)||r.strings[e]||r.bools[e]||o[e]}(e,i)||!1!==r.unknownFn(i)){var l=!r.strings[e]&&t(n)?Number(n):n;u(a,e.split("."),l),(o[e]||[]).forEach((function(e){u(a,e.split("."),l)}))}}function u(e,t,n){for(var o=e,i=0;i<t.length-1;i++){if("__proto__"===(a=t[i]))return;void 0===o[a]&&(o[a]={}),o[a]!==Object.prototype&&o[a]!==Number.prototype&&o[a]!==String.prototype||(o[a]={}),o[a]===Array.prototype&&(o[a]=[]),o=o[a]}var a;"__proto__"!==(a=t[t.length-1])&&(o!==Object.prototype&&o!==Number.prototype&&o!==String.prototype||(o={}),o===Array.prototype&&(o=[]),void 0===o[a]||r.bools[a]||"boolean"==typeof o[a]?o[a]=n:Array.isArray(o[a])?o[a].push(n):o[a]=[o[a],n])}function p(e){return o[e].some((function(e){return r.bools[e]}))}-1!==e.indexOf("--")&&(l=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var c=0;c<e.length;c++){var f=e[c];if(/^--.+=/.test(f)){var v=f.match(/^--([^=]+)=([\s\S]*)$/),g=v[1],h=v[2];r.bools[g]&&(h="false"!==h),s(g,h,f)}else if(/^--no-.+/.test(f)){s(g=f.match(/^--no-(.+)/)[1],!1,f)}else if(/^--.+/.test(f)){g=f.match(/^--(.+)/)[1];void 0===(m=e[c+1])||/^-/.test(m)||r.bools[g]||r.allBools||o[g]&&p(g)?/^(true|false)$/.test(m)?(s(g,"true"===m,f),c++):s(g,!r.strings[g]||"",f):(s(g,m,f),c++)}else if(/^-[^-]+/.test(f)){for(var b=f.slice(1,-1).split(""),y=!1,d=0;d<b.length;d++){var m;if("-"!==(m=f.slice(d+2))){if(/[A-Za-z]/.test(b[d])&&/=/.test(m)){s(b[d],m.split("=")[1],f),y=!0;break}if(/[A-Za-z]/.test(b[d])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(m)){s(b[d],m,f),y=!0;break}if(b[d+1]&&b[d+1].match(/\W/)){s(b[d],f.slice(d+2),f),y=!0;break}s(b[d],!r.strings[b[d]]||"",f)}else s(b[d],m,f)}g=f.slice(-1)[0];y||"-"===g||(!e[c+1]||/^(-|--)[^-]/.test(e[c+1])||r.bools[g]||o[g]&&p(g)?e[c+1]&&/^(true|false)$/.test(e[c+1])?(s(g,"true"===e[c+1],f),c++):s(g,!r.strings[g]||"",f):(s(g,e[c+1],f),c++))}else if(r.unknownFn&&!1===r.unknownFn(f)||a._.push(r.strings._||!t(f)?f:Number(f)),n.stopEarly){a._.push.apply(a._,e.slice(c+1));break}}return Object.keys(i).forEach((function(e){var t,n,r;t=a,n=e.split("."),r=t,n.slice(0,-1).forEach((function(e){r=r[e]||{}})),n[n.length-1]in r||(u(a,e.split("."),i[e]),(o[e]||[]).forEach((function(t){u(a,t.split("."),i[e])})))})),n["--"]?(a["--"]=new Array,l.forEach((function(e){a["--"].push(e)}))):l.forEach((function(e){a._.push(e)})),a},ue=n,pe=r,ce=a,fe=W,ve=q,ge=J,he=le,be=Object.defineProperty,ye=Object.keys;function de(e,t,n){be(e,t,{configurable:!1,enumerable:!1,writable:!1,value:n})}function me(e){var t,n,r,o,i,a,l;if(!(this instanceof me))return arguments.length?new me(e):new me;if(r={pkg:{},help:ue.help,title:ue.title,version:ue.version,updates:ue.updates,argv:ue.argv,options:{}},arguments.length&&(l=ce(r,e)))throw l;return a=this,fe.stdout.on("error",fe.exit),fe.stderr.on("error",fe.exit),de(this,"args",s),de(this,"flags",u),de(this,"help",p),de(this,"version",c),!0===r.title&&r.pkg?"object"==typeof r.pkg.bin&&null!==r.pkg.bin?(n=ye(r.pkg.bin),fe.title=n[0]):r.pkg.name&&(fe.title=r.pkg.name):r.title&&(fe.title=r.title),r.updates&&r.pkg&&r.pkg.name&&r.pkg.version&&(r.pkg,he().notify()),!r.version&&r.pkg&&r.pkg.version&&(r.version=r.pkg.version),r.argv?r.argv=r.argv.slice(2):r.argv=fe.argv.slice(2),o=se(r.argv,r.options),i=o._,delete o._,(t=o).help?this.help(0):t.version?this.version():this;function s(){return i.slice()}function u(){var e,n,r,o;for(e=ye(t),n={},o=0;o<e.length;o++)n[r=e[o]]=t[r];return n}function p(e){ve.error(r.help),a.close(e||0)}function c(){ve.error(r.version),a.close()}}de(me.prototype,"close",(function(e){if(0!==arguments.length){if("number"!=typeof e||!pe(e)||e<0)throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+e+"`.");ge(fe,e)}else ge(fe,0)})),de(me.prototype,"error",(function(e,t){var n;if(!(e instanceof Error))throw new TypeError("invalid argument. First argument must be an error object. Value: `"+e+"`.");if(arguments.length>1){if("number"!=typeof t||!pe(t)||t<0)throw new TypeError("invalid argument. Second argument must be a nonnegative integer. Value: `"+t+"`.");n=t}else n=1;ve.error("Error: %s",e.message),ge(fe,n)})),de(me.prototype,"exit",(function(e){if(0===arguments.length)return fe.exit(0);if("number"!=typeof e||!pe(e)||e<0)throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+e+"`.");fe.exit(e)}));var we=me;export{we as default};
//# sourceMappingURL=mod.js.map
