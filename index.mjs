// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-noop@esm/index.mjs";function n(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}function r(e){return"number"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e))}var o={pkg:{},help:"",title:!0,version:"",updates:!0,argv:null,options:{}};var i=function(e){return Math.floor(e)===e},s=Object.prototype.hasOwnProperty,a=Array.isArray;var l=function(e,t){return"object"!=typeof t||null===t||a(t)?new TypeError("invalid argument. Options must be an object. Value: `"+t+"`."):s.call(t,"pkg")&&(e.pkg=t.pkg,"object"!=typeof e.pkg||null===e.pkg||a(e.pkg))?new TypeError("invalid option. `pkg` option must be an object. Option: `"+e.pkg+"`."):s.call(t,"help")&&(e.help=t.help,"string"!=typeof e.help)?new TypeError("invalid option. `help` option must be a string primitive. Option: `"+e.help+"`."):s.call(t,"version")&&(e.version=t.version,"string"!=typeof e.version)?new TypeError("invalid option. `version` option must be a string primitive. Option: `"+e.version+"`."):s.call(t,"title")&&(e.title=t.title,"string"!=typeof e.title&&"boolean"!=typeof e.title)?new TypeError("invalid option. `title` option must be either a string or boolean primitive. Option: `"+e.title+"`."):s.call(t,"updates")&&(e.updates=t.updates,"boolean"!=typeof e.updates)?new TypeError("invalid option. `updates` option must be a boolean primitive. Option: `"+e.updates+"`."):s.call(t,"argv")&&(e.argv=t.argv,!a(e.argv))?new TypeError("invalid option. `argv` option must be an array. Option: `"+e.argv+"`."):s.call(t,"options")&&(e.options=t.options,"object"!=typeof e.options||null===e.options||a(e.options))?new TypeError("invalid option. `options` option must be a plain object. Option: `"+e.options+"`."):null},u="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function p(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}var c=p,v=f;function g(e){if(c===setTimeout)return setTimeout(e,0);if((c===p||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}"function"==typeof u.setTimeout&&(c=setTimeout),"function"==typeof u.clearTimeout&&(v=clearTimeout);var h,d=[],b=!1,m=-1;function y(){b&&h&&(b=!1,h.length?d=h.concat(d):m=-1,d.length&&w())}function w(){if(!b){var e=g(y);b=!0;for(var t=d.length;t;){for(h=d,d=[];++m<t;)h&&h[m].run();m=-1,t=d.length}h=null,b=!1,function(e){if(v===clearTimeout)return clearTimeout(e);if((v===f||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(e);try{v(e)}catch(t){try{return v.call(null,e)}catch(t){return v.call(this,e)}}}(e)}}function k(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new T(e,t)),1!==d.length||b||g(w)}function T(e,t){this.fun=e,this.array=t}T.prototype.run=function(){this.fun.apply(null,this.array)};var E={},j=[],O={},_={},x={};function A(){}var N=A,F=A,M=A,$=A,L=A,B=A,P=A;function V(e){throw new Error("process.binding is not supported")}function z(){return"/"}function D(e){throw new Error("process.chdir is not supported")}function S(){return 0}var C=u.performance||{},I=C.now||C.mozNow||C.msNow||C.oNow||C.webkitNow||function(){return(new Date).getTime()};function Z(e){var t=.001*I.call(C),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]}var W=new Date;function q(){return(new Date-W)/1e3}var G={nextTick:k,title:"browser",browser:true,env:E,argv:j,version:"",versions:O,on:N,addListener:F,once:M,off:$,removeListener:L,removeAllListeners:B,emit:P,binding:V,cwd:z,chdir:D,umask:S,hrtime:Z,platform:"browser",release:_,config:x,uptime:q},H=n(Object.freeze({__proto__:null,addListener:F,argv:j,binding:V,browser:true,chdir:D,config:x,cwd:z,default:G,emit:P,env:E,hrtime:Z,nextTick:k,off:$,on:N,once:M,platform:"browser",release:_,removeAllListeners:B,removeListener:L,title:"browser",umask:S,uptime:q,version:"",versions:O})),J=console,K=H.versions.node;var Q=function(e,t){var n;(n=K.split("."))[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10),n[0]>0||n[1]>10?e.exitCode=t:(e.exitCode=t,setTimeout((function(){e.exit(t)}),10))},R=t;function U(){return this instanceof U?this:new U}e(U.prototype,"notify",R);var X=function(e,t){t||(t={});var n={bools:{},strings:{},unknownFn:null};"function"==typeof t.unknown&&(n.unknownFn=t.unknown),"boolean"==typeof t.boolean&&t.boolean?n.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach((function(e){n.bools[e]=!0}));var o={};Object.keys(t.alias||{}).forEach((function(e){o[e]=[].concat(t.alias[e]),o[e].forEach((function(t){o[t]=[e].concat(o[e].filter((function(e){return t!==e})))}))})),[].concat(t.string).filter(Boolean).forEach((function(e){n.strings[e]=!0,o[e]&&(n.strings[o[e]]=!0)}));var i=t.default||{},s={_:[]};Object.keys(n.bools).forEach((function(e){l(e,void 0!==i[e]&&i[e])}));var a=[];function l(e,t,i){if(!i||!n.unknownFn||function(e,t){return n.allBools&&/^--[^=]+$/.test(t)||n.strings[e]||n.bools[e]||o[e]}(e,i)||!1!==n.unknownFn(i)){var a=!n.strings[e]&&r(t)?Number(t):t;u(s,e.split("."),a),(o[e]||[]).forEach((function(e){u(s,e.split("."),a)}))}}function u(e,t,r){for(var o=e,i=0;i<t.length-1;i++){if("__proto__"===(s=t[i]))return;void 0===o[s]&&(o[s]={}),o[s]!==Object.prototype&&o[s]!==Number.prototype&&o[s]!==String.prototype||(o[s]={}),o[s]===Array.prototype&&(o[s]=[]),o=o[s]}var s;"__proto__"!==(s=t[t.length-1])&&(o!==Object.prototype&&o!==Number.prototype&&o!==String.prototype||(o={}),o===Array.prototype&&(o=[]),void 0===o[s]||n.bools[s]||"boolean"==typeof o[s]?o[s]=r:Array.isArray(o[s])?o[s].push(r):o[s]=[o[s],r])}function p(e){return o[e].some((function(e){return n.bools[e]}))}-1!==e.indexOf("--")&&(a=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var f=0;f<e.length;f++){var c=e[f];if(/^--.+=/.test(c)){var v=c.match(/^--([^=]+)=([\s\S]*)$/),g=v[1],h=v[2];n.bools[g]&&(h="false"!==h),l(g,h,c)}else if(/^--no-.+/.test(c)){l(g=c.match(/^--no-(.+)/)[1],!1,c)}else if(/^--.+/.test(c)){g=c.match(/^--(.+)/)[1];void 0===(y=e[f+1])||/^-/.test(y)||n.bools[g]||n.allBools||o[g]&&p(g)?/^(true|false)$/.test(y)?(l(g,"true"===y,c),f++):l(g,!n.strings[g]||"",c):(l(g,y,c),f++)}else if(/^-[^-]+/.test(c)){for(var d=c.slice(1,-1).split(""),b=!1,m=0;m<d.length;m++){var y;if("-"!==(y=c.slice(m+2))){if(/[A-Za-z]/.test(d[m])&&/=/.test(y)){l(d[m],y.split("=")[1],c),b=!0;break}if(/[A-Za-z]/.test(d[m])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(y)){l(d[m],y,c),b=!0;break}if(d[m+1]&&d[m+1].match(/\W/)){l(d[m],c.slice(m+2),c),b=!0;break}l(d[m],!n.strings[d[m]]||"",c)}else l(d[m],y,c)}g=c.slice(-1)[0];b||"-"===g||(!e[f+1]||/^(-|--)[^-]/.test(e[f+1])||n.bools[g]||o[g]&&p(g)?e[f+1]&&/^(true|false)$/.test(e[f+1])?(l(g,"true"===e[f+1],c),f++):l(g,!n.strings[g]||"",c):(l(g,e[f+1],c),f++))}else if(n.unknownFn&&!1===n.unknownFn(c)||s._.push(n.strings._||!r(c)?c:Number(c)),t.stopEarly){s._.push.apply(s._,e.slice(f+1));break}}return Object.keys(i).forEach((function(e){var t,n,r;t=s,n=e.split("."),r=t,n.slice(0,-1).forEach((function(e){r=r[e]||{}})),n[n.length-1]in r||(u(s,e.split("."),i[e]),(o[e]||[]).forEach((function(t){u(s,t.split("."),i[e])})))})),t["--"]?(s["--"]=new Array,a.forEach((function(e){s["--"].push(e)}))):a.forEach((function(e){s._.push(e)})),s},Y=o,ee=i,te=l,ne=H,re=J,oe=Q,ie=U,se=Object.defineProperty,ae=Object.keys;function le(e,t,n){se(e,t,{configurable:!1,enumerable:!1,writable:!1,value:n})}function ue(e){var t,n,r,o,i,s,a;if(!(this instanceof ue))return arguments.length?new ue(e):new ue;if(r={pkg:{},help:Y.help,title:Y.title,version:Y.version,updates:Y.updates,argv:Y.argv,options:{}},arguments.length&&(a=te(r,e)))throw a;return s=this,ne.stdout.on("error",ne.exit),ne.stderr.on("error",ne.exit),le(this,"args",l),le(this,"flags",u),le(this,"help",p),le(this,"version",f),!0===r.title&&r.pkg?"object"==typeof r.pkg.bin&&null!==r.pkg.bin?(n=ae(r.pkg.bin),ne.title=n[0]):r.pkg.name&&(ne.title=r.pkg.name):r.title&&(ne.title=r.title),r.updates&&r.pkg&&r.pkg.name&&r.pkg.version&&(r.pkg,ie().notify()),!r.version&&r.pkg&&r.pkg.version&&(r.version=r.pkg.version),r.argv?r.argv=r.argv.slice(2):r.argv=ne.argv.slice(2),o=X(r.argv,r.options),i=o._,delete o._,(t=o).help?this.help(0):t.version?this.version():this;function l(){return i.slice()}function u(){var e,n,r,o;for(e=ae(t),n={},o=0;o<e.length;o++)n[r=e[o]]=t[r];return n}function p(e){re.error(r.help),s.close(e||0)}function f(){re.error(r.version),s.close()}}le(ue.prototype,"close",(function(e){if(0!==arguments.length){if("number"!=typeof e||!ee(e)||e<0)throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+e+"`.");oe(ne,e)}else oe(ne,0)})),le(ue.prototype,"error",(function(e,t){var n;if(!(e instanceof Error))throw new TypeError("invalid argument. First argument must be an error object. Value: `"+e+"`.");if(arguments.length>1){if("number"!=typeof t||!ee(t)||t<0)throw new TypeError("invalid argument. Second argument must be a nonnegative integer. Value: `"+t+"`.");n=t}else n=1;re.error("Error: %s",e.message),oe(ne,n)})),le(ue.prototype,"exit",(function(e){if(0===arguments.length)return ne.exit(0);if("number"!=typeof e||!ee(e)||e<0)throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+e+"`.");ne.exit(e)}));var pe=ue;export{pe as default};
//# sourceMappingURL=index.mjs.map
